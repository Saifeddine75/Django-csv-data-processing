{% block title %}Dataset Plot{% endblock %}

<!-- TODO Add delete button -->
{% block content %}
<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <!-- File Upload Form -->
    <div class="card shadow-sm p-4">
        <h2 class="text-center">Upload your CSV file</h2>
        <form action="" method="post" enctype="multipart/form-data" class="text-center">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Upload</button>
        </form>
    </div>
    <!-- Dataset Selection -->
    {% if datasets %}
    <div class="my-4">
        <h3>Select a Dataset:</h3>
        <form method="get">
            {% csrf_token %} 
            <select name="dataset_id" class="form-select" onchange="this.form.submit()">
                {% for dataset in datasets %}
                    <option value="{{ dataset.id }}" {% if dataset.id == selected_dataset.id %}selected{% endif %}>
                        {{ dataset.title }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}